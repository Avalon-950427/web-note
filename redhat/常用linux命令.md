## 常用 Linux 命令

#### RPM

| 描述                            | 命令                  |
| ------------------------------- | --------------------- |
| 安装软件的命令格式              | rpm -ivh filename.rpm |
| 升级软件的命令格式              | rpm -Uvh filename.rpm |
| 卸载软件的命令格式              | rpm -e filename.rpm   |
| 查询软件描述信息的命令格式      | rpm -qpi filename.rpm |
| 列出软件文件信息的命令格式      | rpm -qpi filename.rpm |
| 查询文件属于哪个 RPM 的命令格式 | rpm -qf filename      |

#### Yum

| 描述                         | 命令                      |
| ---------------------------- | ------------------------- |
| 列出所有仓库                 | yum repolist all          |
| 列出仓库中所有的软件包       | yum list all              |
| 查看软件包信息               | yum info 软件包名称       |
| 安装软件包                   | yum install 软件包名称    |
| 重新安装软件包               | yum reinstall 软件包名称  |
| 升级软件包                   | yum update 软件包名称     |
| 移除软件包                   | yum remove 软件包名称     |
| 清除所有仓库的缓存           | yum clean all             |
| 检查可更新的软件包           | yum check-update          |
| 查看系统中已经安装的软件包组 | yum grouplist             |
| 安装指定的软件包组           | yum groupinstall 软件包组 |
| 移除指定的软件包组           | yum groupremove 软件包组  |
| 查询指定的软件包组信息       | yum groupinfo 软件包组    |

#### 查看帮助文档

```
linux常见命令格式
命令名称 [命令参数] [命令对象]
```

命令参数可用长格式(完整的选项名称),也可以用短歌诗(单个字母的缩写),前者用--作为前缀,后者用-作为前缀
说明|命令
---|---
长格式|man --help
短格式|man -h

**man 命令常用按键**
按键|描述
---|---
空格|向下翻一页
page down|向下翻一页
page up|向上翻一页
home|前往首页
end|前往尾页
/|从上至下搜索某个关键词,如"/linux"
?|从下至上搜索某个关键词,如"?linux"
n|定位到下一个搜索到的关键词
N|定位到上一个搜多到的关键词
q|退出帮助文档

**帮助文档信息的结构**
结构名称|描述
---|---
NAME|命令的名称
SYNOPSIS|参数的大致使用方法
DESCRIPTION|介绍说明
EXAMPLES|演示(附带简单说明)
OVERVIEW|概述
DEFAULTS|默认的功能
ENVIRONMENT |环境变量
FILES| 用到的文件
SEE ALSO| 相关的资料
HISTORY| 维护历史与联系方式

#### 常用系统工作命令

###### 1.echo 命令

echo 命令用于在终端输出字符串或变量提取后的值，格式为“echo [字符串 | $变量]”。

```
echo www.baidu.com // 输出www.baidu.com
echo $SHELL // 输出/bin/bash
```

###### 2. date 命令

date 命令用于显示及设置系统的时间或日期，格式为“date [选项][+指定的格式]”

| 格式 | 作用             |
| ---- | ---------------- |
| %t   | 跳格[tab 键]     |
| %H   | 小时(0-23)       |
| %I   | 小时(0-12)       |
| %M   | 分钟(0-59)       |
| %m   | 月份             |
| %Y   | 年               |
| %S   | 秒               |
| %j   | 今年中的第几天   |
| %d   | 一个月中的第几天 |

```
date "+%Y-%m-%d%t%H:%M:%S" // 输出2020-04-19 tab分隔 14:34:30
```

###### reboot 命令

reboot 命令用于重启系统，其格式为 reboot。
由于重启计算机这种操作会涉及硬件资源的管理权限，因此默认只能使用 root 管理员来 重启

###### poweroff 命令

poweroff 命令用于关闭系统，其格式为 poweroff
也是只能由管理员才可操作

###### wget 命令

wget 命令用于在终端中下载网络文件，格式为“wget [参数] 下载地址”。

| 参数     | 描述                              |
| -------- | --------------------------------- |
| -b       | 后台下载模式                      |
| -p       | 下载到指定目录                    |
| -t       | 最大尝试次数                      |
| -c       | 断点续传                          |
| -P(大写) | 下载页面内所有资源,包括图片视频等 |
| -r       | 递归下载                          |

###### ps 命令

ps 命令用于查看系统中的进程状态，格式为“ps [参数]”。
参数|描述
---|---
-a|显示所有进程(包括其他用户的进程)
-u|用户以及其他详细信息
-x|显示没有控制终端的进程

**Linux 常见进程状态**
状态|描述
---|---
R(运行)|进程正在运行或在运行队列中等待
S(中断)|进程处于休眠中,当某个条件形成后或者接收到信号时,则脱离该状态
D(不可中断)|进程不响应系统异步信号,即便用 kill 命令也不能将其中断
Z(僵死)|进程已经终止,但进程描述依旧存在,知道父进程调用 wait4()系统函数后将进程释放
T(停止)|进程收到停止信号后停止运行

![images](images/进程状态.png)

###### top 命令

top 命令用于动态地监视进程活动与系统负载等信息，其格式为 top。
![top命令](images/top命令.png)  
top 命令结果的前 5 行为系统整体的同级信息:

1. 系统时间、运行时间、登录终端数、系统负载（三个数值分别为 1 分钟、5 分钟、15 分钟内的平均值，数值越小意味着负载越低）。
2. 进程总数、运行中的进程数、睡眠中的进程数、停止的进程数、僵死的进程 数。
3. 用户占用资源百分比、系统内核占用资源百分比、改变过优先级的进程资源 百分比、空闲的资源百分比等。
4. 物理内存总量、内存使用量、内存空闲量、作为内核缓存的内存量。
5. 虚拟内存总量、虚拟内存使用量、虚拟内存空闲量、已被提前加载的内存量。

###### pidof 命令

pidof 命令用于查询某个指定服务进程的 PID 值，格式为“pidof [参数][服务名称]”。  
每个进程的进程号(PID)是唯一的

```
pidof sshd
```

###### kill 命令

kill 命令用于终止某个指定 PID 的服务进程，格式为“kill [参数][进程 pid]”。

```
kill 1471
```

###### killall 命令

killall 命令用于终止某个指定名称的服务所对应的全部进程，格式为：“killall [参数][进 程名称]”。

```
killall httpd
```

#### 系统状态监测命令

###### ifconfig 命令

ifconfig 命令用于获取网卡配置与网络状态等信息，格式为“ifconfig [网络设备][参数]” 。
![ifconfig](images/ifconfig命令.png)  
eno16777728: 网卡名称
inet 192.168.10.10 是 ip 地址
ether 后面是物理网卡地址(MAC 地址)  
RX 为接受数据包的个数及累计流量  
TX 为发送数据包的个数及累计流量

###### uname 命令

uname 命令用于查看系统内核与系统版本等信息，格式为“uname [-a]”。
![uname](images/uname命令.png)  
分别对应当前系统的内核名称、主 机名、内核发行版本、节点名、系统时间、硬件名称、硬件平台、处理器类型以及操作系统 名称

```
查看当前系统版本的详细信息
cat /etc/redhat-release // Red Hat Enterprise Linux Server release 7.0 (Maipo)
```

###### uptime 命令

uptime 用于查看系统的负载信息，格式为 uptime
运行结果为 top 命令的第一行

###### free 命令

free 用于显示当前系统中内存的使用量信息，格式为“free [-h]”。
![free](images/free命令.png)

###### who 命令

who 用于查看当前登入主机的用户终端信息，格式为“who [参数]”。
![who](images/who命令.png)

###### last 命令

last 命令用于查看所有系统的登录记录，格式为“last [参数]”。

###### history 命令

history 命令用于显示历史执行过的命令，格式为“history [-c]”。
默认显示最近 1000 条命令,还可以通过自定义/etc/profile 文件中的 HISTSIZE 变量值来更改记录条数  
可用"!编码数字"来重复执行某一条命令
-c 参数为清空本机上的历史记录

###### sosreport 命令

sosreport 命令用于收集系统配置及架构信息并输出诊断文档，格式为 sosreport  
当系统出现故障时,可用此明林来获取系统运行状态和服务配置信息的压缩文件

#### 工作目录切换命令

###### pwd 命令

pwd 命令是查询用户当前所在的目录,格式为"pwd [选项]"

```
pwd // 输出/home/avalon/Desktop
```

###### cd 命令

cd 命令用于切换工作路径,格式为"pwd [选项]"

```
cd - // 返回上一次所在的目录
cd.. // 进入上级目录
cd~ // 切换到当前用户的家目录
cd ~username // 切换到其他用户的家目录
```

###### ls 命令

ls 命令用于显示目录中的文件信息，格式为“ls [选项][文件] ”。

```
ls -a // 查看全部文件,包括隐藏文件
ls -l // 查看文件的属性大小等信息
ls -ld // 加d参数,查看目录的属性信息
```

#### 文本文件编辑命令

###### cat 命令

cat 命令用于查看内容较少的纯文本文件,格式为"cat [选项][文件]"

```
cat -n initial-setup-ks.cfg // -n表示显示行号
```

###### more 命令

more 命令用于查看内容较多的纯文本文件,格式为"more [选项] 文件"

```
more
```

###### head 命令

head 命令用于查看纯文本文档的前 N 行,格式为"head [选项][文件]"

```
head -n 20 initial-setup-ks.cfg // 20表示阅读前20行
```

###### tail 命令

tail 命令用于查看纯文本文档的后 N 行或持续刷新内容，格式为“tail [选项][文件]”。

```
tail -n 20 initial-setup-ks.cfg // 阅读文件后20行
tail -f initial-setup-ks.cfg // 实时刷新文件内容
```

###### tr 命令

tr 命令用于替换文本文件中的字符，格式为“tr [原始字符][目标字符]”。

```
cat anaconda-ks.cfg | tr [a-z] [A-Z]
```

###### wc 命令

wc 命令用于统计指定文本的行数、字数、字节数，格式为“wc [参数] 文本”。
参数|描述
---|---
-l|只显示行数
-w|只显示单词数
-c|只显示字节数

###### stat 命令

stat 命令用于查看文件的具体存储信息和时间等信息，格式为“stat 文件名称”。

###### cut 命令

cut 命令用于按“列”提取文本字符，格式为“cut [参数] 文本”
可用-f 来设置要查看的列数,-d 可设置分隔符

```
cut -d: -f1 /etc/passwd
```

###### diff 命令

diff 命令用于比较多个文本文件的差异，格式为“diff [参数] 文件”。
可用--brief 参数来确认两个文件是否相同,也可用-c 来详细比较多个文件的差异之处

```
diff --brief diff_a.txt diff_b.txt
```

#### 文件目录管理命令

###### touch 命令

touch 命令用于创建空白文件或设置文件的时间，格式为“touch [选项][文件]”。

| 参数 | 描述                    |
| ---- | ----------------------- |
| -a   | 仅修改"读取时间"atime   |
| -m   | 仅修改"修改时间"mtime   |
| -d   | 同时修改 atime 和 mtime |

```
touch -d "2017-09-04 13:00" .bash_history
```

###### mkdir 命令

mkdir 用于创建空白的目录,格式为"mkdir [选项] 目录"
可用-p 参数来创建嵌套层叠的文件目录

```
mkdir -p a/b/c/d
```

###### cp 命令

cp 命令用于复制文件或目录，格式为“cp [选项] 源文件 目标文件”。

**复制规则**

- 如果目标文件是目录,则会把源文件复制到该目录中
- 如果目标文件也是普通文件,则会询问是否要覆盖它
- 如果目标文件不存在,则执行正常的复制操作

| 参数 | 说明                                  |
| ---- | ------------------------------------- |
| -p   | 保留原始文件的属性                    |
| -d   | 若对象为链接文件,则保留链接文件的属性 |
| -r   | 递归持续复制(用于目录)                |
| -i   | 若目标文件存在则询问是否覆盖          |
| -a   | 相当于-pdr                            |

```
cp -i a.log b.log
```

###### mv 命令

mv 命令用于剪切文件或将文件重命名，格式为“mv [选项] 源文件 [目标路径|目标文件名]”

###### rm 命令

rm 命令用于删除文件或目录,格式为"rm [选项] 文件"
rm 文件时,系统默认会询问是否删除,-f 可跳过询问强制删除  
想要删除的如果是目录,则需要加-r

###### dd 命令

dd 命令用于按照指定大小和个数的数据块来复制文件或转换文件，格式为“dd [参数]” 。

| 参数  | 描述                 |
| ----- | -------------------- |
| if    | 输入文件的名称       |
| of    | 输出文件的名称       |
| bs    | 设置每个"块"的大小   |
| count | 设置要复制"块的"大小 |

```
dd if=/dev/zero of=560_file count=1 bs=560M // 将/dev/zero文件中取出一个大小为560MB的数据块,保存成名为560_file的文件
dd if=/dev/cdrom of=RHEL-server-7.0-x86_64-LinuxProbe.com.iso
```

###### file 命令

file 命令用于查看文件的类型，格式为“file 文件名”。

#### 打包压缩与搜索命令

###### tar 命令

tar 命令用于对文件进行打包压缩或解压，格式为“tar [选项][文件]”。
参数|描述
---|---
-c|创建压缩文件
-x|解开压缩文件
-t|查看包内有哪些文件
-z|用 Gzip 压缩或解压
-j|用 bzip2 压缩或解压
-v|显示压缩或解压的过程
-f|目标文件名,必须放到参数的最后一位
-P(大写\_|保留原始的权限与属性
-p|使用绝对路径来压缩
-C(大写)|指定解压到的目录

```
tar -czvf b.tar.gz b/c
命令 参数  压缩文件名 要打包的目录

tar czvf b.tar.gz b/c -C /root.etc // 最后指定了解压到的目录中
```

###### grep 命令

grep 命令用于在文本中执行关键词搜索，并显示匹配的结果，格式为 “grep [选项][文件]”

| 参数 | 作用                                         |
| ---- | -------------------------------------------- |
| -b   | 将可执行文件(binary)当做文本文件(text)来搜索 |
| -c   | 仅显示找到的行数                             |
| -i   | 忽略大小写                                   |
| -n   | 显示行号                                     |
| -v   | 反向选择---仅列出没有"关键词"的行            |

```
grep if a.log
命令 搜索词 搜索的文件
```

###### find 命令

find 命令用于按照指定条件来查找文件，格式为“find [查找路径] 寻找条件 操作”。
参数|描述
---|---
-name|匹配名称
-perm|匹配权限(mode 为完成匹配,-mode 为包含即可)
-user|匹配所有者
-group|匹配所有组
-mtime -n +n|匹配修改内容的时间(-n 指 n 天以内,+n 指 n 天以前)  
-atime -n +n|匹配访问文件的时间(-n 指 n 天以内,+n 指 n 天以前)
-ctime -n +n|匹配修改文件权限的时间(-n 指 n 天以为,+n 指 n 天以前)
-nouser|匹配无所有者的文件
-nogroup|匹配无所有组的文件
-newer f1 !f2|匹配比文件 f1 新但比 f2 旧的文件
--type b/d/c/p/l/f|匹配文件类型(后面的字幕参数依次表示块设备,目录,字符设备,管道,链接文件,文本文件)
-size|匹配文件的大小(+50KB 为查找超过 50KB 的文件,而-50KB 为查找小于 50KB 的文件)
-prune|忽略某个目录
-exec ......{}\;|后面可跟用于进一步处理搜索结果的命令
